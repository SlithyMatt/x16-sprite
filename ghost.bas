1 REM PROGRAM: SPRITE TEST

100 REM TODO: CHANGE PALETTE BEYOND OFFSET 0

999 REM LOAD BITMAP 1 INTO VRAM AT $04000
1000 DATA $00,$00,$00,$44,$40,$00,$00,$00
1010 DATA $00,$00,$77,$77,$77,$77,$00,$00
1020 DATA $00,$07,$77,$77,$77,$77,$70,$00
1030 DATA $00,$77,$77,$77,$77,$77,$77,$00
1040 DATA $07,$77,$77,$77,$77,$77,$77,$70
1050 DATA $07,$77,$77,$77,$77,$77,$77,$70
1060 DATA $77,$77,$77,$77,$77,$77,$77,$77
1070 DATA $77,$77,$77,$77,$77,$77,$77,$77
1080 DATA $77,$77,$77,$77,$77,$77,$77,$77
1090 DATA $77,$77,$77,$77,$77,$77,$77,$77
1100 DATA $07,$77,$77,$77,$77,$77,$77,$70
1110 DATA $07,$77,$77,$77,$77,$77,$77,$70
1120 DATA $00,$77,$77,$77,$77,$77,$77,$00
1130 DATA $00,$07,$77,$77,$77,$77,$70,$00
1140 DATA $00,$00,$77,$77,$77,$77,$00,$00
1150 DATA $00,$00,$00,$77,$77,$00,$00,$00
1300 FOR I=O TO 127
1400 READ PX
1500 VPOKE $0,$4000+I,PX
1600 NEXT I

1699 REM SPRINT FRAME OFFSETS
1700 FH(0) = $00 : FH(1) = $04 : FH(2) = $08 : FH(3) = $04
1710 FV(0) = $00 : FV(1) = $0C : FV(2) = $10 : FV(3) = $0C
1720 HZ = 1
1800 CF = 0 : REM CURRENT FRAME

1999 REM ENABLE SPRITES
2000 VPOKE $F,$4000,1

2099 REM SET SPRITE DATA
2100 VPOKE $F,$5000,$00
2200 VPOKE $F,$5001,$02 : REM 4BPP, ADDRESS $04000
2300 VPOKE $F,$5002,$80 : REM XPOS 128
2400 VPOKE $F,$5003,$00
2450 X = 128
2500 VPOKE $F,$5004,$80 : REM YPOS 128
2600 VPOKE $F,$5005,$00
2650 Y = 128
2700 VPOKE $F,$5006,$0C : REM NO COLLISION, ZDEPTH 3, NO FLIP
2800 VPOKE $F,$5007,$50 : REM 16X16 PIXELS, PALETTE OFFSET 0

2999 REM LOAD BITMAP 2 INTO VRAM AT $04080
3000 DATA $00,$00,$00,$77,$77,$00,$00,$00
3010 DATA $00,$00,$77,$77,$77,$77,$00,$00
3020 DATA $00,$07,$77,$77,$77,$77,$70,$00
3030 DATA $00,$77,$77,$77,$77,$77,$77,$00
3040 DATA $07,$77,$77,$77,$77,$77,$77,$70
3050 DATA $07,$77,$77,$77,$77,$77,$77,$70
3060 DATA $77,$77,$77,$77,$77,$77,$00,$00
3070 DATA $77,$77,$77,$77,$77,$00,$00,$00
3080 DATA $77,$77,$77,$77,$00,$00,$00,$00
3090 DATA $77,$77,$77,$77,$77,$70,$00,$00
3100 DATA $07,$77,$77,$77,$77,$77,$77,$70
3110 DATA $07,$77,$77,$77,$77,$77,$77,$70
3120 DATA $00,$77,$77,$77,$77,$77,$77,$00
3130 DATA $00,$07,$77,$77,$77,$77,$70,$00
3140 DATA $00,$00,$77,$77,$77,$77,$00,$00
3150 DATA $00,$00,$00,$77,$77,$00,$00,$00
3160 FOR I=O TO 127
3170 READ PX
3180 VPOKE $0,$4080+I,PX
3190 NEXT I

3199 REM LOAD BITMAP 3 INTO VRAM AT $04100
3200 DATA $00,$00,$00,$77,$77,$00,$00,$00
3210 DATA $00,$00,$77,$77,$77,$77,$00,$00
3220 DATA $00,$07,$77,$77,$77,$77,$70,$00
3230 DATA $00,$77,$77,$77,$77,$77,$77,$00
3240 DATA $07,$77,$77,$77,$77,$77,$00,$00
3250 DATA $07,$77,$77,$77,$77,$70,$00,$00
3260 DATA $77,$77,$77,$77,$77,$00,$00,$00
3270 DATA $77,$77,$77,$77,$00,$00,$00,$00
3280 DATA $77,$77,$77,$77,$00,$00,$00,$00
3290 DATA $77,$77,$77,$77,$77,$00,$00,$00
3300 DATA $07,$77,$77,$77,$77,$70,$00,$00
3310 DATA $07,$77,$77,$77,$77,$77,$00,$00
3320 DATA $00,$77,$77,$77,$77,$77,$77,$00
3330 DATA $00,$07,$77,$77,$77,$77,$70,$00
3340 DATA $00,$00,$77,$77,$77,$77,$00,$00
3350 DATA $00,$00,$00,$77,$77,$00,$00,$00
3360 FOR I=O TO 127
3370 READ PX
3380 VPOKE $0,$4100+I,PX
3390 NEXT I

3399 REM LOAD BITMAP 4 INTO VRAM AT $04180
3400 DATA $00,$00,$00,$00,$00,$00,$00,$00
3410 DATA $00,$00,$77,$00,$00,$77,$00,$00
3420 DATA $00,$07,$77,$00,$00,$77,$70,$00
3430 DATA $00,$77,$77,$00,$00,$77,$77,$00
3440 DATA $07,$77,$77,$70,$00,$77,$77,$70
3450 DATA $07,$77,$77,$70,$07,$77,$77,$70
3460 DATA $77,$77,$77,$77,$07,$77,$77,$77
3470 DATA $77,$77,$77,$77,$07,$77,$77,$77
3480 DATA $77,$77,$77,$77,$77,$77,$77,$77
3490 DATA $77,$77,$77,$77,$77,$77,$77,$77
3500 DATA $07,$77,$77,$77,$77,$77,$77,$70
3510 DATA $07,$77,$77,$77,$77,$77,$77,$70
3520 DATA $00,$77,$77,$77,$77,$77,$77,$00
3530 DATA $00,$07,$77,$77,$77,$77,$70,$00
3540 DATA $00,$00,$77,$77,$77,$77,$00,$00
3550 DATA $00,$00,$00,$77,$77,$00,$00,$00
3560 FOR I=O TO 127
3570 READ PX
3580 VPOKE $0,$4180+I,PX
3590 NEXT I

3599 REM LOAD BITMAP 5 INTO VRAM AT $04200
3600 DATA $00,$00,$00,$00,$00,$00,$00,$00
3610 DATA $00,$00,$00,$00,$00,$00,$00,$00
3620 DATA $00,$07,$00,$00,$00,$00,$70,$00
3630 DATA $00,$77,$00,$00,$00,$00,$77,$00
3640 DATA $07,$77,$70,$00,$00,$07,$77,$70
3650 DATA $07,$77,$77,$00,$00,$77,$77,$70
3660 DATA $77,$77,$77,$70,$07,$77,$77,$77
3670 DATA $77,$77,$77,$70,$07,$77,$77,$77
3680 DATA $77,$77,$77,$77,$77,$77,$77,$77
3690 DATA $77,$77,$77,$77,$77,$77,$77,$77
3700 DATA $07,$77,$77,$77,$77,$77,$77,$70
3710 DATA $07,$77,$77,$77,$77,$77,$77,$70
3720 DATA $00,$77,$77,$77,$77,$77,$77,$00
3730 DATA $00,$07,$77,$77,$77,$77,$70,$00
3740 DATA $00,$00,$77,$77,$77,$77,$00,$00
3750 DATA $00,$00,$00,$77,$77,$00,$00,$00
3760 FOR I=O TO 127
3770 READ PX
3780 VPOKE $0,$4200+I,PX
3790 NEXT I


4000 GET A$
4100 IF A$="" THEN GOTO 4000
4200 IF A$=CHR$(29) AND X < 640 THEN GOSUB 5000
4300 IF A$=CHR$(157) AND X > 0 THEN GOSUB 6000
4400 IF A$=CHR$(17) AND Y < 480 THEN GOSUB 7000
4500 IF A$=CHR$(145) AND Y > 0 THEN GOSUB 8000
4550 IF A$=" " THEN GOSUB 10000
4600 GOTO 4000

4999 REM MOVE RIGHT
5000 X = X+1
5100 VPOKE $F,$5002,X AND $FF
5200 VPOKE $F,$5003,(X AND $0300)/$100
5250 HZ = 1
5300 GOSUB 9000
5400 VPOKE $F,$5006,$0C : REM NO FLIP
5500 RETURN

5999 REM MOVE LEFT
6000 X = X-1
6100 VPOKE $F,$5002,X AND $FF
6200 VPOKE $F,$5003,(X AND $0300)/$100
6250 HZ = 1
6300 GOSUB 9000
6400 VPOKE $F,$5006,$0D : REM H-FLIP
6500 RETURN

6999 REM MOVE DOWN
7000 Y = Y+1
7100 VPOKE $F,$5004,Y AND $FF
7200 VPOKE $F,$5005,(Y AND $0300)/$100
7250 HZ = 0
7300 GOSUB 9000
7350 VPOKE $F,$5006,$0E : REM V-FLIP
7400 RETURN

7999 REM SCROLL UP
8000 Y = Y-1
8100 VPOKE $F,$5004,Y AND $FF
8200 VPOKE $F,$5005,(Y AND $0300)/$100
8250 HZ = 0
8300 GOSUB 9000
8350 VPOKE $F,$5006,$0C : REM NO FLIP
8400 RETURN

8999 REM NEXT FRAME
9000 CF = CF + 1
9100 IF CF > 3 THEN CF = 0
9110 IF HZ = 1 THEN FR = FH(CF) : GOTO 9200
9120 FR = FV(CF)
9200 VPOKE $F,$5000,FR
9300 CP = (((X+8)/8 AND $7F) + ((Y+8)*16 AND $7F80)) * 2
9400 IF CP > $3FFE THEN CP = $3FFE
9500 VPOKE 0,CP,$20
9600 RETURN

9999 REM CHANGE COLOR
10000 REM TODO: CYCLE THROUGH PALETTE OFFSET
